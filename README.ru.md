# SubtitleShaker
![](https://img.shields.io/github/v/release/DENNKA/SubtitleShaker)
![](https://img.shields.io/github/release-date/DENNKA/SubtitleShaker)
[![](https://tokei.rs/b1/github/DENNKA/SubtitleShaker/?category=code)](https://github.com/XAMPPRocky/tokei)

## [ENGLISH](README.md); НА РУССКОМ;
<!---
full line:
[ENGLISH](README.md); [НА РУССКОМ](README.ru.md);
-->

---

# Пример работы (на сайте гифка лагает, но можно скачать)
![Work example](shaking_example.gif)

---
# Использует
* Оригинальный Makefile: https://github.com/mbcrawfo/GenericMakefile  
* Переводчик: https://mymemory.translated.net/
* Boost 1.66+
---

## [Документация](docs/README.ru.md)
## [Содействие](CONTRIBUTING.ru.md)

# Описание
Программа позволяет трясти .ass субтитры, добавлять теги во множество фраз, переводить (но пока плохо и только на русский)

## Как работает
Создает множество фраз с тегом \move что создает ощущение тряски  
**ВАЖНО:** из-за разделения на фразы ломаются теги связаные со временем (например: \k(все теги караоке), \move, \t, \fad, \fade)

## Быстрый старт
 * Скачиваем для своей платформы --> https://github.com/DENNKA/subtitleShaker/releases/latest
 * Распаковываем в папку с субтитрами (лучше чтобы других файлов не было)
 * Дальше нужно настроить: создаем файл setting.txt (в нашей папке), в него пишем 1 -s 50 -i 5 это заставит первый субтитр трястись, -s 50 это скорость тряски чем ниже тем быстрее, но не ниже 10. -i 5 это интенсивность в пикселях чем больше тем более размашистая тряска, если нужно несколько строк то вместо 1 указываем диапозон, например 10-20, если нужно обработать еще диалогов просто переходим на следующую строчку
 * Сохраняем и запускаем SubtitleShaker.exe
 * Возможно он спросит какой именно файл нужно обработать просто пишем цифру в консоль
 * Если все прошло успешно появится файл начинающийся на MOD_
 * Файл готов
 * Если не работает пишите [СЮДА](https://github.com/DENNKA/SubtitleShaker/issues/new) или [СЮДА под любое видео](https://www.youtube.com/channel/UCm9PVOWO_FVnEhh3tYxQ2fw) **обязательно** прикладывайте свои файлы

## Опции  
```
==============================================================
SubtitleShaker [опции]
  -h          --help   Помощь
  -i         --input   Исходный файл
  -o        --output   Файл для вывода
 -sf --settings_file   Файл настроек
  -v       --verbose   Более подробный вывод
  -s          --seed   Семя для генерации случайных чисел
==============================================================
Опции обработки строк:
  -s         --shake   Трясти каждые n миллисекунд
  -i     --intensity   Интенсивность в пикселях
 -ix   --intensity_x   Интенсивность в пикселях по x
 -iy   --intensity_y   Интенсивность в пикселях по y
  -m          --mode   Выбор режима
   Режимы:
        add_str          Добавить строку в начало или конец фразы
           -b  --begin            В начало
           -e  --end              В конец

        translate        Перевод диалогов
           -f  --from             С языка
           -t0 --to               На язык РАБОТАЕТ ТОЛЬКО ru

  -q         --quiet   Удален
==============================================================
```

## Как использовать
* Скачайте последнюю версию (скачиваем .rar для своей платформы: windows или linux) https://github.com/DENNKA/subtitleShaker/releases/latest
* Поместите в одну папку скачаный ранее исполнительный файл и свои субтитры (.ass)
* Создайте файл настроек (например settings.txt)
* Пропишите нужные параметры в этом файле настроек
  #### Как прописать параметры

  - Пишем номер (или диапозон) нужной нам фразы, пишем опцию -s и число, число будет показывать через сколько миллисекунд будет создаваться следуящая фраза
  (если напишем -s 50 то каждая новая фраза будет появлятся через 50 миллисекунд),
  чем меньше тем быстрее субтитр будет трястись, минимум 10, последняя цифра ничего не значит (программа ставит вместо нее ноль (159 = 150, 19 = 10)),
  дальше пишем -i и число, число будет показывать на сколько пикселей нужно сдвигать субтитр (например -i 5 - субтитр будет трястись на 5 пикселей в каждую
  сторону), также есть отдельно для горизонтали -ix и вертикали -iy.  
  - Чтобы обработать еще фраз нужно просто перейти на следующую строку (опции будут
  писаться обсолютно также).  
  - Если написать перед номером (диаозоном) фразы минус, то это исключит ее для обработки
  (например -11 или -15-45), строчки начинающиеся на # игнорируются
  - Опция -q убирает вывод

  Что примерно должно получится:  
  Обработка первой фразы (тряска каждые 50 миллисекунд, в 5 пикселей)  
    * **1 -s 50 -i 5**  
  Диапозон:  
  Обработка диапозона фраз (с первой по десятую включительно)  
    * **1-10 -s 50 -i 5**  
  Несколько фраз с разными настройками:
    * **3 -s 20 -i 5**
    * **4-20 -s 100 -ix 3**  
    * **21-100 -s 40 -i 5**  
    * **2 -s 40 -i 5**  
  Исключение:
    * **1-100 -s 50 -i 5**
    * **-44**  
    * **-60-70**  
  Фокусы (пересечение опций):
    * **1-100 -s 50 -q**
    * **1-20 -i 5**
    * **1-10 -iy 0**
    * **21-100 -iy 5**  
  Добавление тегов (**в тегах пробелов быть не должно!**):
    * **1-100 -m add_str -b {\fad(100,100)}**  
  Добавление в конец:
    * **1-100 -m add_str -e addInEnd**  
  Перевод:
    * **1-100 -m translate -f en --too ru**  
  **Перевод работает только на русский язык**
* Запустите программу:
  1. ВИНДА
      * Shift + ПКМ по пустому месту в текущей папке
      * Жмем "открыть окно PowerShell здесь" (может быть немного по другому). Вводим в консоль следующую строчку с изменением параметров на свои:
      * .\SubtitleShaker.exe -i вашисубтитры.ass -o вывод.ass -sf settings.txt
      * вывод.ass - будет нужным нам файлом
      * PROFIT!!!
  1. ПИНГВИН
      * Пишем в командной строке:
      * ./SubtitleShaker -i subtitle.ass -o output.ass -sf settings.txt
